APPLICATION = luke_display

BOARD ?= samr21-xpro

RIOTBASE ?= $(CURDIR)/../../../RIOT

EXTERNAL_MODULE_DIRS += ../common

USEMODULE += gnrc_netdev_default
USEMODULE += auto_init_gnrc_netif
USEMODULE += cord_ep
USEMODULE += gcoap
USEMODULE += gnrc_ipv6_default
USEMODULE += lpd8808
USEMODULE += xtimer
USEMODULE += luke_common

USEPKG += jsmn

FEATURES_REQUIRED += periph_gpio_irq

DEVELHELP ?= 0
QUIET ?= 1

DEFAULT_CHANNEL         ?= 19
LUKE_DISPLAY_CNT        ?= 64
LUKE_DISPLAY_CLK_PIN    ?= GPIO_PIN(PB, 23)
LUKE_DISPLAY_DAT_PIN    ?= GPIO_PIN(PB, 22)

CFLAGS += -DGNRC_IPV6_NIB_CONF_SLAAC=1
CFLAGS += -DGNRC_NETIF_IPV6_GROUPS_NUMOF=5
CFLAGS += -DGCOAP_STACK_SIZE=1564
CFLAGS += "-DLPD8808_PARAM_LED_CNT=$(LUKE_DISPLAY_CNT)"
CFLAGS += "-DLPD8808_PARAM_PIN_CLK=$(LUKE_DISPLAY_CLK_PIN)"
CFLAGS += "-DLPD8808_PARAM_PIN_DAT=$(LUKE_DISPLAY_DAT_PIN)"
CFLAGS += -DIEEE802154_DEFAULT_CHANNEL=$(DEFAULT_CHANNEL)

INCLUDES = -I$(CURDIR)/../common/

include $(RIOTBASE)/Makefile.include
